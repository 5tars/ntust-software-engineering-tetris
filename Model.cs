
class Model
{
	/* On board, 0: space, 1: falling block, 2: rotation core, 3: piling block, 4: border */
	public void BOARD_init()
	{
		int i, j;
		for (i = 0; i < 21; i++)
			for (j = 0; j < 12; j++)
			{
				if (i == 20) BOARD[i][j] = 4;
				else if (j == 0 || j == 11) BOARD[i][j] = 4;
				else BOARD[i][j] = 0;
			}
	}
	public void add_block(int piece, int rotation)//block init
	{
		int i, j;
		for (i = 0; i < 4; i++)
			for (j = 0; j < 4; j++)
				if (BOARD[i][j + 3] == 0)
					BOARD[i][j + 3] = PIECES[piece][rotation][i][j];
	}
	public int can_left()
	{
		int i, j;
		for (i = 19; i >= 0; i--)
		{
			for (j = 1; j < 11; j++)
			{
				if (BOARD[i][j] >= 1 && BOARD[i][j] <= 2 && BOARD[i][j - 1] > 2) return 0;
			}
		}
		return 1;
	}
	public int can_right( );
	public int can_rotate( );
	public int can_fall( );
	


	

	public int total_del = 0, difficulty = 1, speed = 1000; // total of deleted lines
	public int[,] BOARD = new int[21, 12] { 0 }; // 20x10 without borders

	//Types of the tetris model
	//0 is sapce,1 is block, 2 is block and the rotate core
	public int[,,,] PIECES = new int[7, 4, 4, 4]
	{
			{ // O
	        	{
					{ 0, 0, 0, 0 },
					{ 0, 1, 2, 0 },
					{ 0, 1, 1, 0 },
					{ 0, 0, 0, 0 }
				},
				{
					{ 0, 0, 0, 0 },
					{ 0, 1, 2, 0 },
					{ 0, 1, 1, 0 },
					{ 0, 0, 0, 0 }
				},
				{
					{ 0, 0, 0, 0 },
					{ 0, 1, 2, 0 },
					{ 0, 1, 1, 0 },
					{ 0, 0, 0, 0 }
				},
				{
					{ 0, 0, 0, 0 },
					{ 0, 1, 2, 0 },
					{ 0, 1, 1, 0 },
					{ 0, 0, 0, 0 }
				}
			}, // end O
	        { // I
				{
					{ 0, 0, 0, 0 },
					{ 1, 1, 2, 1 },
					{ 0, 0, 0, 0 },
					{ 0, 0, 0, 0 }
				},
				{
					{ 0, 0, 1, 0 },
					{ 0, 0, 2, 0 },
					{ 0, 0, 1, 0 },
					{ 0, 0, 1, 0 }
				},
				{
					{ 0, 0, 0, 0 },
					{ 1, 1, 2, 1 },
					{ 0, 0, 0, 0 },
					{ 0, 0, 0, 0 }
				},
				{
					{ 0, 0, 1, 0 },
					{ 0, 0, 2, 0 },
					{ 0, 0, 1, 0 },
					{ 0, 0, 1, 0 }
				}
			}, // end I
			{ // S
				{
					{ 0, 0, 0, 0 },
					{ 0, 0, 2, 1 },
					{ 0, 1, 1, 0 },
					{ 0, 0, 0, 0 }
				},
				{
					{ 0, 0, 1, 0 },
					{ 0, 0, 2, 1 },
					{ 0, 0, 0, 1 },
					{ 0, 0, 0, 0 }
				},
				{
					{ 0, 0, 0, 0 },
					{ 0, 0, 2, 1 },
					{ 0, 1, 1, 0 },
					{ 0, 0, 0, 0 }
				},
				{
					{ 0, 0, 1, 0 },
					{ 0, 0, 2, 1 },
					{ 0, 0, 0, 1 },
					{ 0, 0, 0, 0 }
				}
			}, // end S
			{ // Z
				{
					{ 0, 0, 0, 0 },
					{ 0, 1, 2, 0 },
					{ 0, 0, 1, 1 },
					{ 0, 0, 0, 0 }
				},
				{
					{ 0, 0, 0, 1 },
					{ 0, 0, 2, 1 },
					{ 0, 0, 1, 0 },
					{ 0, 0, 0, 0 }
				},
				{
					{ 0, 0, 0, 0 },
					{ 0, 1, 2, 0 },
					{ 0, 0, 1, 1 },
					{ 0, 0, 0, 0 }
				},
				{
					{ 0, 0, 0, 1 },
					{ 0, 0, 2, 1 },
					{ 0, 0, 1, 0 },
					{ 0, 0, 0, 0 }
				}
			}, // end Z
			{ // L
				{
					{ 0, 0, 0, 0 },
					{ 0, 1, 2, 1 },
					{ 0, 1, 0, 0 },
					{ 0, 0, 0, 0 }
				},
				{
					{ 0, 0, 1, 0 },
					{ 0, 0, 2, 0 },
					{ 0, 0, 1, 1 },
					{ 0, 0, 0, 0 }
				},
				{
					{ 0, 0, 0, 1 },
					{ 0, 1, 2, 1 },
					{ 0, 0, 0, 0 },
					{ 0, 0, 0, 0 }
				},
				{
					{ 0, 1, 1, 0 },
					{ 0, 0, 2, 0 },
					{ 0, 0, 1, 0 },
					{ 0, 0, 0, 0 }
				}
			}, // end L
			{ // J
				{
					{ 0, 0, 0, 0 },
					{ 0, 1, 2, 1 },
					{ 0, 0, 0, 1 },
					{ 0, 0, 0, 0 }
				},
				{
					{ 0, 0, 1, 1 },
					{ 0, 0, 2, 0 },
					{ 0, 0, 1, 0 },
					{ 0, 0, 0, 0 }
				},
				{
					{ 0, 1, 0, 0 },
					{ 0, 1, 2, 1 },
					{ 0, 0, 0, 0 },
					{ 0, 0, 0, 0 }
				},
				{
					{ 0, 0, 1, 0 },
					{ 0, 0, 2, 0 },
					{ 0, 1, 1, 0 },
					{ 0, 0, 0, 0 }
				}
			}, // end J
			{ // T
				{
					{ 0, 0, 0, 0 },
					{ 0, 1, 2, 1 },
					{ 0, 0, 1, 0 },
					{ 0, 0, 0, 0 }
				},
				{
					{ 0, 0, 1, 0 },
					{ 0, 0, 2, 1 },
					{ 0, 0, 1, 0 },
					{ 0, 0, 0, 0 }
				},
				{
					{ 0, 0, 1, 0 },
					{ 0, 1, 2, 1 },
					{ 0, 0, 0, 0 },
					{ 0, 0, 0, 0 }
				},
				{
					{ 0, 0, 1, 0 },
					{ 0, 1, 2, 0 },
					{ 0, 0, 1, 0 },
					{ 0, 0, 0, 0 }
				}
			} // end T
        
	};

}
